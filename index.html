<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ 1‚Äì7 –∫–ª–∞—Å—Å—ã</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;background:#f4f6f8;margin:0}
main{max-width:700px;margin:20px auto;background:#fff;padding:20px;border-radius:10px}
select,button,input{width:100%;padding:10px;margin:8px 0;font-size:16px}
button{background:#3498db;color:#fff;border:0;border-radius:6px}
.task{font-size:22px;text-align:center;margin:20px 0}
.ok{color:green}.bad{color:red}
</style>
</head>

<body>
<main>

<h2>üìò –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ 1‚Äì7 –∫–ª–∞—Å—Å—ã</h2>

<label>–Ø–∑—ã–∫</label>
<select id="lang">
<option value="ru">–†—É—Å—Å–∫–∏–π</option>
<option value="kk">“ö–∞–∑–∞“õ—à–∞</option>
</select>

<label>–ö–ª–∞—Å—Å</label>
<select id="grade"></select>

<label>–¢–µ–º–∞</label>
<select id="topic"></select>

<button onclick="startLesson()">–ù–∞—á–∞—Ç—å</button>

<div id="lesson" style="display:none">
<div class="task" id="task"></div>
<input id="answer" type="number" placeholder="–û—Ç–≤–µ—Ç">
<button onclick="check()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
<div id="result"></div>
</div>

</main>

<script>
/* ================== –î–ê–ù–ù–´–ï ================== */
let currentLanguage = 'ru'
let currentGrade = 1
let currentTopicIndex = 0
let currentTask = null

const topicsRu = {
1:['–°–ª–æ–∂–µ–Ω–∏–µ –¥–æ 10','–í—ã—á–∏—Ç–∞–Ω–∏–µ –¥–æ 10'],
2:['–¢–∞–±–ª–∏—Ü–∞ —É–º–Ω–æ–∂–µ–Ω–∏—è','–î–µ–ª–µ–Ω–∏–µ'],
3:['–°–ª–æ–∂–µ–Ω–∏–µ –∏ –≤—ã—á–∏—Ç–∞–Ω–∏–µ','–¢–µ–∫—Å—Ç–æ–≤—ã–µ –∑–∞–¥–∞—á–∏'],
4:['–î—Ä–æ–±–∏','–ü–µ—Ä–∏–º–µ—Ç—Ä –∏ –ø–ª–æ—â–∞–¥—å'],
5:['–ü—Ä–æ—Ü–µ–Ω—Ç—ã','–£—Ä–∞–≤–Ω–µ–Ω–∏—è'],
6:['–î–µ—Å—è—Ç–∏—á–Ω—ã–µ –¥—Ä–æ–±–∏','–ü—Ä–æ–ø–æ—Ä—Ü–∏–∏'],
7:['–õ–∏–Ω–µ–π–Ω—ã–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è','–ü—Ä–æ—Ü–µ–Ω—Ç—ã']
}

const topicsKk = {
1:['10-“ì–∞ –¥–µ–π—ñ–Ω “õ–æ—Å—É','10-“ì–∞ –¥–µ–π—ñ–Ω –∞–∑–∞–π—Ç—É'],
2:['–ö”©–±–µ–π—Ç—É –∫–µ—Å—Ç–µ—Å—ñ','–ë”©–ª—É'],
3:['“ö–æ—Å—É –∂”ô–Ω–µ –∞–∑–∞–π—Ç—É','–ú”ô—Ç—ñ–Ω–¥—ñ –µ—Å–µ–ø—Ç–µ—Ä'],
4:['–ë”©–ª—à–µ–∫—Ç–µ—Ä','–ü–µ—Ä–∏–º–µ—Ç—Ä –∂”ô–Ω–µ –∞—É–¥–∞–Ω'],
5:['–ü–∞–π—ã–∑–¥–∞—Ä','–¢–µ“£–¥–µ—É–ª–µ—Ä'],
6:['–û–Ω–¥—ã“õ –±”©–ª—à–µ–∫—Ç–µ—Ä','–ü—Ä–æ–ø–æ—Ä—Ü–∏—è–ª–∞—Ä'],
7:['–°—ã–∑—ã“õ—Ç—ã“õ —Ç–µ“£–¥–µ—É–ª–µ—Ä','–ü–∞–π—ã–∑–¥–∞—Ä']
}

function getTopics() {
return currentLanguage === 'ru' ? topicsRu : topicsKk
}

/* ================== TASK ENGINE ================== */
const TASKS_PER_TOPIC = 10
const taskBank = {}

function rng(seed){return()=>{seed|=0;seed=seed+0x6D2B79F5|0;let t=Math.imul(seed^seed>>>15,1|seed);t=t+Math.imul(t^t>>>7,61|t)^t;return((t^t>>>14)>>>0)/4294967296}}

function topicId(name){
if(/–°–ª–æ–∂|“ö–æ—Å—É/.test(name))return'add'
if(/–í—ã—á|–ê–∑–∞–π/.test(name))return'sub'
if(/–ö”©–±–µ–π|—É–º–Ω–æ–∂/.test(name))return'mul'
if(/–ë”©–ª|–î–µ–ª/.test(name))return'div'
if(/–ü–∞–π—ã–∑|–ü—Ä–æ—Ü/.test(name))return'perc'
if(/–¢–µ“£|–£—Ä–∞–≤/.test(name))return'eq'
return'def'
}

function genTask(id,r){
if(id==='add'){let a=1+r()*8|0,b=1+r()*8|0;return{q:`${a}+${b}`,a:a+b}}
if(id==='sub'){let a=5+r()*5|0,b=1+r()*a|0;return{q:`${a}-${b}`,a:a-b}}
if(id==='mul'){let a=2+r()*7|0,b=2+r()*7|0;return{q:`${a}√ó${b}`,a:a*b}}
if(id==='div'){let b=2+r()*7|0,r2=2+r()*7|0;return{q:`${b*r2}√∑${b}`,a:r2}}
if(id==='perc'){let base=[100,200][r()*2|0],p=[10,20,50][r()*3|0];return{q:`${p}% –æ—Ç ${base}`,a:base*p/100}}
if(id==='eq'){let x=1+r()*20|0,c=5+r()*15|0;return{q:`x+${c}=${x+c}`,a:x}}
return{q:'1+1',a:2}
}

function buildTaskBank(){
const data=getTopics()
for(let g=1;g<=7;g++){
taskBank[g]={}
data[g].forEach((t,i)=>{
const r=rng(g*100+i*10)
taskBank[g][i]=[]
for(let k=0;k<TASKS_PER_TOPIC;k++){
taskBank[g][i].push(genTask(topicId(t),r))
}
})
}
}

/* ================== –ü–†–û–ì–†–ï–°–° ================== */
const store=(k,v)=>v===undefined?JSON.parse(localStorage[k]||'{}'):(localStorage[k]=JSON.stringify(v))
function progress(g,t){const d=store('p');return d[`${g}_${t}`]||{i:0}}
function saveProgress(g,t,p){const d=store('p');d[`${g}_${t}`]=p;store('p',d)}

/* ================== UI ================== */
function fillGrades(){
const g=document.getElementById('grade')
g.innerHTML=''
for(let i=1;i<=7;i++)g.innerHTML+=`<option>${i}</option>`
g.onchange=()=>{currentGrade=+g.value;fillTopics()}
}

function fillTopics(){
const t=document.getElementById('topic')
t.innerHTML=''
getTopics()[currentGrade].forEach((v,i)=>t.innerHTML+=`<option value="${i}">${v}</option>`)
t.onchange=()=>currentTopicIndex=+t.value
currentTopicIndex=0
}

function startLesson(){
buildTaskBank()
document.getElementById('lesson').style.display='block'
nextTask()
}

function nextTask(){
const p=progress(currentGrade,currentTopicIndex)
currentTask=taskBank[currentGrade][currentTopicIndex][p.i]
document.getElementById('task').innerText=currentTask.q
document.getElementById('answer').value=''
document.getElementById('result').innerText=''
}

function check(){
const a=+document.getElementById('answer').value
const res=document.getElementById('result')
const p=progress(currentGrade,currentTopicIndex)
if(a===currentTask.a){res.innerHTML='<span class=ok>–í–µ—Ä–Ω–æ</span>'}
else{res.innerHTML='<span class=bad>–ù–µ–≤–µ—Ä–Ω–æ</span>'}
p.i=(p.i+1)%TASKS_PER_TOPIC
saveProgress(currentGrade,currentTopicIndex,p)
setTimeout(nextTask,600)
}

/* ================== INIT ================== */
document.getElementById('lang').onchange=e=>{
currentLanguage=e.target.value
fillGrades()
fillTopics()
}

fillGrades()
fillTopics()
</script>
</body>
</html>